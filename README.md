# WplusJetsAnalysis
Pythia analysis code developed by bjohns. Tarball available for download at: https://github.com/bjohns664297/WplusJetsBaseline

Once you have used WplusJetsBaseline to create a root file output in /WplusJetsBaseline/pythia-outputs, you can analyze the result using WplusJetsAnalysis. 

1) Once logging into cluster, type the following 4 commands one after another in the terminal (or see RootCopyPasta.txt in WplusJetsAnalysis): 

srun --pty -p largemem --time=0-12:00:00 bash

OR

srun --pty -c 4 --time=0-12:00:00 bash

THEN 

export ATLAS_LOCAL_ROOT_BASE=/cvmfs/atlas.cern.ch/repo/ATLASLocalRootBase
source ${ATLAS_LOCAL_ROOT_BASE}/user/atlasLocalSetup.sh

End with:

lsetup "root 6.22.00-python3-x86_64-centos7-gcc8-opt"
(for Pythia8.302) -> CURRENTLY WORKING

***Once cluster settings are complete, run the package in this order as follows***

2) MyDetectorSimul.C
-----------------
Takes the truth-level variables generated by MyPythiaSimul.cc and creates reco-level
variables based on the code in this script. Only use this script if you want to edit
the detector effects. Outputs a file to the directory detector-simul with truth-level 
and new reco-level data. The output file has the same name as the original file.
Input: pythia-outputs/data.root
Output: detector-simul/data.root
Runs with:
	cd detector-simul
	root -x -l -q MyDetectorSimul.C
***Note: -x makes it run without a wrapper function, -l suppresses a splash screen printout, and -q quits root after it runs


3) MyAnalysis.C
------------
Runs the analysis on the ntuple, defines variables and flags, creates histograms.
At the very top you can specify the name of the output file.
At the bottom of the script in the main function, you can decide whether you want 
to analyze all the files in the directory pythia-outputs/, or make a list of the 
specific files in that directory that you want to analyze.
Input: data.root
Output: analysis.root
Runs with:
	cd analyze-pythia
	root -x -l -q MyAnalysis.C


4) PlotMacro.C
--------------------
Plots observables, saves plots as png's in analyze-pythia/plots/ directory.
Runs with:
	root -x -l -q PlotMacro.C
** Currently not working. Needs updating.